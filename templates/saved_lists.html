{% extends 'base.html' %}

{% block content %}
<div class="container">
    <h1>Saved Grocery Lists</h1>

    <div class="saved-lists">
        {% for list in saved_lists %}
        <div class="saved-list">
            <h3>{{ list.name }}</h3>
            <p class="date">Created: {{ list.created_at.strftime('%Y-%m-%d') }}</p>
            
            <ul>
                {% for ingredient in list.get_ingredients() %}
                <li>{{ ingredient }}</li>
                {% endfor %}
            </ul>
            
            <button onclick="deleteList({{ list.id }})" class="delete-btn">Delete List</button>
        </div>
        {% endfor %}
    </div>

    <a href="{{ url_for('meal_plan.plan') }}" class="button">Back to Meal Plan</a>
</div>

<style>
.saved-lists {
    display: grid;
    gap: 20px;
    margin: 20px 0;
}

.saved-list {
    border: 1px solid #ddd;
    padding: 15px;
    border-radius: 5px;
}

.date {
    color: #666;
    font-size: 0.9em;
}

.delete-btn {
    background-color: #dc3545;
    color: white;
    border: none;
    padding: 5px 10px;
    border-radius: 3px;
    cursor: pointer;
    margin-top: 10px;
}
</style>

<script>
function deleteList(listId) {
    if (!confirm('Are you sure you want to delete this list?')) return;
    
    fetch(`/grocery-list/delete-list/${listId}`, {
        method: 'POST'
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            location.reload();
        }
    });
}
</script>
{% endblock %}
